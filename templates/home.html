{% extends 'base.html' %}

{% load static %}



{% block content%}

<section class="row" id="latest">

  <div class="col-12">
    <h2 class="text-center m-5">Latest News</h2>
  </div>

  {% for p in home %}

  <div class="col-lg-3 col-md-4">
    <div class="card">
      <img src="/media/{{p.image}}" class="card-img-top" alt="photo">
      <div class="card-body">
        <h5 class="card-title">{{p.name}}</h5>
        
        <p class="card-text">{{p.time}}</p>
        <a href="#" class="btn btn-primary">Click Here
          <i class="bi bi-cart"></i>
        </a>
       
        <button class="btn btn-outline-primary like-btn" data-article-id="{{ article.id }}">
          <i class="far fa-heart"></i>
          <span class="like-count">{{ article.like_set.count }}</span>
      </button>
      
      <script>
          $(document).ready(function() {
              $('.like-btn').click(function() {
                  var articleId = $(this).data('article-id');
                  $.ajax({
                      method: 'POST',
                      url: '/likes/create/' + articleId + '/',
                      success: function(data) {
                          $('.like-count[data-article-id="' + articleId + '"]').text(data.like_count);
                      }
                  });
              });
          });
      </script>
      
      </div>
    </div>
  </div>


{% endfor %}

{% endblock  %}
